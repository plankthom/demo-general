{"sensors":[{"label":"actualSeries","name":"timeSeriesSensor","version":"1.2.1","dataTrigger":false,"tickTrigger":false,"position":[630,565],"sequence":1,"properties":{"grouping":"PT1H","aggregate":"sum","to":"1557316799999","resource":"asset_20_10111_electricity","metric":"ActualActivePower","from":"1556711999999"}},{"label":"byomlPredict_1","name":"byomlPredict","version":"1.0.2","dataTrigger":false,"tickTrigger":false,"position":[481,566],"sequence":1,"properties":{"modelName":"demo","instances":"datatransform.instances"}},{"label":"computeRMSE","name":"scriptSensor","version":"0.0.9","dataTrigger":false,"tickTrigger":false,"position":[776,565],"sequence":1,"properties":{"script":"const actual = options.rawData['actualSeries'].series\nconst predictions = options.rawData['byomlPredict_1'].predictions\n\nconst actualData = actual.map(x => x[1])\nconst predictData = predictions[0]\nvar total_error = 0\nfor (var i = 0; i < actualData.length; i++){\n   total_error += (predictData[i] - actualData[i]) ** 2\n}\nconst rmse = Math.sqrt(total_error / actualData.length)\nsend(null, {observedState : \"done\", rawData : {'rmse': rmse}})\n\n"}},{"label":"datatransform","name":"scriptSensor","version":"0.0.9","dataTrigger":false,"tickTrigger":false,"position":[340,566],"sequence":1,"properties":{"script":"const timeSeries = options.rawData['features'].series\nconst requestedLength = 720\n\nif (!timeSeries) {\n    send(new Error('Missing property: timeSeries'), {observedState : \"error\"});\n}\n\nconst dataValues = timeSeries.map(x => x[1])\n\nif (dataValues.length !== requestedLength) {\n     send(new Error(`timeSeries property does not have the requested length (${requestedLength}), got ${dataValues.length} values`), {observedState : \"Unconverted\"});\n}\n\nconst value = {\n  observedState: \"done\",\n  rawData: {\n    instances: [{previous_month: dataValues}]\n  }\n};\n\nsend(null, value);\n"}},{"label":"features","name":"timeSeriesSensor","version":"1.2.1","dataTrigger":false,"tickTrigger":true,"position":[187,567],"sequence":1,"properties":{"grouping":"PT1H","aggregate":"sum","to":"1556711999999","resource":"asset_20_10111_electricity","metric":"ActualActivePower","from":"1554119999999"}}],"actuators":[{"label":"debugDialog_1","name":"debugDialog","version":"1.0.4","position":[933,564],"properties":{"message":"RMSE for the first week of May: {{computeRMSE.rmse}}"}}],"relations":[],"triggers":[{"destinationLabel":"debugDialog_1","sourceLabel":"computeRMSE","invocationPolicy":0,"statesTrigger":["done"]},{"destinationLabel":"actualSeries","sourceLabel":"byomlPredict_1","statesTrigger":["Predicted"]},{"destinationLabel":"byomlPredict_1","sourceLabel":"datatransform","statesTrigger":["done"]},{"destinationLabel":"computeRMSE","sourceLabel":"actualSeries","statesTrigger":["Collected"]},{"destinationLabel":"datatransform","sourceLabel":"features","statesTrigger":["Collected"]}],"name":"tensorflow_demo"}