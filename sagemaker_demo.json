{"sensors":[{"label":"Sagemaker_1","name":"Sagemaker","version":"0.2.24","dataTrigger":false,"tickTrigger":false,"position":[619,317],"sequence":1,"properties":{"endpoint":"asset-10111","observations":"TimeSeriesToDeepAR_1.request","contentType":"application/json"}},{"label":"TimeSeriesToDeepAR_1","name":"TimeSeriesToDeepAR","version":"0.1.6","dataTrigger":false,"tickTrigger":false,"position":[455,317],"sequence":1,"properties":{"timeSeries":"timeSeriesSensor_1.series"}},{"label":"compareSeries","name":"timeSeriesSensor","version":"1.2.1","dataTrigger":false,"tickTrigger":false,"position":[798,317],"sequence":1,"properties":{"grouping":"PT1H","aggregate":"sum","to":"1557316799999","resource":"asset_20_10111_electricity","metric":"ActualActivePower","from":"1556711999999"}},{"label":"computeRMSE","name":"scriptSensor","version":"0.0.9","dataTrigger":false,"tickTrigger":false,"position":[959,316],"sequence":1,"properties":{"script":"const actual = options.rawData['compareSeries'].series\nconsole.log(options.rawData['Sagemaker_1'])\nconst predictions = JSON.parse(options.rawData['Sagemaker_1'].data)[\"predictions\"]\n\nconst actualData = actual.map(x => x[1])\nconst predictData = predictions[0][\"mean\"]\nvar total_error = 0\nfor (var i = 0; i < actualData.length; i++){\n   total_error += (predictData[i] - actualData[i]) ** 2\n}\nconst rmse = Math.sqrt(total_error / actualData.length)\nsend(null, {observedState : \"done\", rawData : {'rmse': rmse}})\n"}},{"label":"timeSeriesSensor_1","name":"timeSeriesSensor","version":"1.2.1","dataTrigger":false,"tickTrigger":true,"position":[275,317],"sequence":1,"properties":{"grouping":"PT1H","aggregate":"sum","to":"1556711999999","resource":"asset_20_10111_electricity","metric":"ActualActivePower","from":"1554119999999"}}],"actuators":[{"label":"debugDialog_1","name":"debugDialog","version":"1.0.4","position":[1114,316],"properties":{"message":"RMSE for the first week of May: {{computeRMSE.rmse}}"}}],"relations":[],"triggers":[{"destinationLabel":"debugDialog_1","sourceLabel":"computeRMSE","invocationPolicy":0,"statesTrigger":["done","error"]},{"destinationLabel":"Sagemaker_1","sourceLabel":"TimeSeriesToDeepAR_1","statesTrigger":["Converted"]},{"destinationLabel":"TimeSeriesToDeepAR_1","sourceLabel":"timeSeriesSensor_1","statesTrigger":["Collected"]},{"destinationLabel":"compareSeries","sourceLabel":"Sagemaker_1","statesTrigger":["Collected"]},{"destinationLabel":"computeRMSE","sourceLabel":"compareSeries","statesTrigger":["Collected"]}],"name":"sagemaker_demo"}